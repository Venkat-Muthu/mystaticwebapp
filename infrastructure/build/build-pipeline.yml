trigger:
  branches:
    include:
    - master
  # paths:
  #   exclude:
  #   - build-pipeline.yml
  #   - release-pipeline.yml

variables:
  vmImageName: 'ubuntu-latest'

jobs:  
- job: Build
  pool:
    vmImage: $(vmImageName)
  steps:
  - script: | 
      echo 'do some unit test'
    displayName: 'unit test'
  - script: | 
      echo 'compile application'
    displayName: 'compile'

  - task: CopyFiles@2
    inputs:
      sourceFolder: '$(System.DefaultWorkingDirectory)/src/' # Optional
      contents: '**' 
      targetFolder: $(Build.ArtifactStagingDirectory)/src/
      cleanTargetFolder: true # Optional
      overWrite: false # Optional
      #flattenFolders: false # Optional
      preserveTimestamp: true # Optional

  # - task: ArchiveFiles@2
  #   displayName: 'Archive files'
  #   inputs:
  #     rootFolderOrFile: '$(System.DefaultWorkingDirectory)/src/'
  #     includeRootFolder: false
  #     archiveFile: $(Build.ArtifactStagingDirectory)/src/
  #     replaceExistingArchive: true

  - task: PublishBuildArtifacts@1
    inputs:
      pathToPublish: $(Build.ArtifactStagingDirectory)/src/
      artifactName: drop

  # - upload: $(Build.ArtifactStagingDirectory)/src/
  #   artifact: drop